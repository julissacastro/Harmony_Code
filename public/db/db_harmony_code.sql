-- MySQL Script generated by MySQL Workbench
-- Wed Jul 25 07:20:13 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema db_harmony_code
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema db_harmony_code
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `db_harmony_code` DEFAULT CHARACTER SET utf8 ;
USE `db_harmony_code` ;

-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_GENEROS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_GENEROS` (
  `CODIGO_GENERO` INT NOT NULL,
  `NOMBRE_GENERO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CODIGO_GENERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_TIPOS_USUARIOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_TIPOS_USUARIOS` (
  `CODIGO_TIPO_USUARIO` INT NOT NULL,
  `NOMBRE_TIPO_USUARIO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CODIGO_TIPO_USUARIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_TIPOS_LUGAR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_TIPOS_LUGAR` (
  `CODIGO_TIPO_LUGAR` INT NOT NULL,
  `NOMBRE_TIPO_LUGAR` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CODIGO_TIPO_LUGAR`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_LUGARES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_LUGARES` (
  `CODIGO_LUGAR` INT NOT NULL,
  `CODIGO_TIPO_LUGAR` INT NOT NULL,
  `CODIGO_LUGAR_PADRE` INT NULL,
  `NOMBRE_LUGAR` VARCHAR(45) NOT NULL,
  `LATITUD` VARCHAR(20) NULL,
  `LONGITUD` VARCHAR(20) NULL,
  PRIMARY KEY (`CODIGO_LUGAR`),
  INDEX `fk_TBL_LUGARES_TBL_TIPOS_LUGAR1_idx` (`CODIGO_TIPO_LUGAR` ASC),
  INDEX `fk_TBL_LUGARES_TBL_LUGARES1_idx` (`CODIGO_LUGAR_PADRE` ASC),
  CONSTRAINT `fk_TBL_LUGARES_TBL_TIPOS_LUGAR1`
    FOREIGN KEY (`CODIGO_TIPO_LUGAR`)
    REFERENCES `db_harmony_code`.`TBL_TIPOS_LUGAR` (`CODIGO_TIPO_LUGAR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_LUGARES_TBL_LUGARES1`
    FOREIGN KEY (`CODIGO_LUGAR_PADRE`)
    REFERENCES `db_harmony_code`.`TBL_LUGARES` (`CODIGO_LUGAR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_USUARIOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_USUARIOS` (
  `CODIGO_USUARIO` INT NOT NULL,
  `CODIGO_GENERO` INT NOT NULL,
  `CODIGO_TIPO_USUARIO` INT NOT NULL,
  `CODIGO_LUGAR` INT NOT NULL,
  `NOMBRE_USUARIO` VARCHAR(45) NOT NULL,
  `APELLIDO_USUARIO` VARCHAR(45) NOT NULL,
  `CORREO` VARCHAR(100) NOT NULL,
  `CONTRASENIA` VARCHAR(100) NOT NULL,
  `FOTO_PERFIL` BLOB NULL,
  `FOTO_PORTADA` BLOB NULL,
  `FECHA_NACIMIENTO` DATE NULL,
  `FECHA_REGISTRO` DATE NULL,
  PRIMARY KEY (`CODIGO_USUARIO`),
  INDEX `fk_TBL_USUARIOS_TBL_GENEROS_idx` (`CODIGO_GENERO` ASC),
  INDEX `fk_TBL_USUARIOS_TBL_TIPOS_USUARIOS1_idx` (`CODIGO_TIPO_USUARIO` ASC),
  INDEX `fk_TBL_USUARIOS_TBL_LUGARES1_idx` (`CODIGO_LUGAR` ASC),
  CONSTRAINT `fk_TBL_USUARIOS_TBL_GENEROS`
    FOREIGN KEY (`CODIGO_GENERO`)
    REFERENCES `db_harmony_code`.`TBL_GENEROS` (`CODIGO_GENERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_USUARIOS_TBL_TIPOS_USUARIOS1`
    FOREIGN KEY (`CODIGO_TIPO_USUARIO`)
    REFERENCES `db_harmony_code`.`TBL_TIPOS_USUARIOS` (`CODIGO_TIPO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_USUARIOS_TBL_LUGARES1`
    FOREIGN KEY (`CODIGO_LUGAR`)
    REFERENCES `db_harmony_code`.`TBL_LUGARES` (`CODIGO_LUGAR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_PLANES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_PLANES` (
  `CODIGO_PLAN` INT NOT NULL,
  `NOMBRE_PLAN` VARCHAR(45) NOT NULL,
  `PESO_MB` INT NOT NULL,
  `COSTO_PLAN` DOUBLE NOT NULL,
  `PERIODICIDAD` VARCHAR(45) NULL,
  `DESCRIPCION_PLAN` VARCHAR(150) NULL,
  PRIMARY KEY (`CODIGO_PLAN`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_USUARIOS_RED_SOCIAL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_USUARIOS_RED_SOCIAL` (
  `CODIGO_USUARIO_RED_SOCIAL` INT NOT NULL,
  `CODIGO_USUARIO` INT NOT NULL,
  `CODIGO_RED_SOCIAL` VARCHAR(500) NOT NULL COMMENT 'CODIGO QUE DEVUELVE LA RED SOCIAL PARA INICIAR SESION',
  `SERVICIO_RED_SOCIAL` VARCHAR(45) NOT NULL COMMENT 'QUE RED SOCIAL ESTA BRINDANDO EL SERVICIO',
  PRIMARY KEY (`CODIGO_USUARIO_RED_SOCIAL`),
  INDEX `fk_TBL_USUARIOS_RED_SOCIAL_TBL_USUARIOS1_idx` (`CODIGO_USUARIO` ASC),
  CONSTRAINT `fk_TBL_USUARIOS_RED_SOCIAL_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_TIPO_DOCUMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_TIPO_DOCUMENTO` (
  `CODIGO_TIPO_DOCUMENTO` INT NOT NULL,
  `NOMBRE_TIPO_DOCUMENTO` VARCHAR(45) NULL COMMENT 'PUEDE SER CARPETA O ARCHIVO',
  PRIMARY KEY (`CODIGO_TIPO_DOCUMENTO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_DOCUMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_DOCUMENTO` (
  `CODIGO_DOCUMENTO` INT NOT NULL,
  `CODIGO_DOCUMENTO_PADRE` INT NULL,
  `CODIGO_USUARIO_PROPIETARIO` INT NOT NULL,
  `CODIGO_TIPO_DOCUMENTO` INT NOT NULL,
  `NOMBRE_DOCUMENTO` VARCHAR(45) NOT NULL,
  `TAMANIO` DOUBLE NULL,
  `EXTENSION_DOCUMENTO` VARCHAR(45) NULL,
  `FECHA_CREACION` DATE NOT NULL,
  `FECHA_MODIFICACION` DATE NULL,
  `DESCRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`CODIGO_DOCUMENTO`),
  INDEX `fk_TBL_DOCUMENTO_TBL_DOCUMENTO1_idx` (`CODIGO_DOCUMENTO_PADRE` ASC),
  INDEX `fk_TBL_DOCUMENTO_TBL_TIPO_DOCUMENTO1_idx` (`CODIGO_TIPO_DOCUMENTO` ASC),
  INDEX `fk_TBL_DOCUMENTO_TBL_USUARIOS1_idx` (`CODIGO_USUARIO_PROPIETARIO` ASC),
  CONSTRAINT `fk_TBL_DOCUMENTO_TBL_DOCUMENTO1`
    FOREIGN KEY (`CODIGO_DOCUMENTO_PADRE`)
    REFERENCES `db_harmony_code`.`TBL_DOCUMENTO` (`CODIGO_DOCUMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_DOCUMENTO_TBL_TIPO_DOCUMENTO1`
    FOREIGN KEY (`CODIGO_TIPO_DOCUMENTO`)
    REFERENCES `db_harmony_code`.`TBL_TIPO_DOCUMENTO` (`CODIGO_TIPO_DOCUMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_DOCUMENTO_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO_PROPIETARIO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_COMENTARIOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_COMENTARIOS` (
  `CODIGO_COMENTARIO` INT NOT NULL,
  `CODIGO_USUARIO` INT NOT NULL,
  `CODIGO_COMENTARIO_SUPERIOR` INT NULL,
  `CONTENIDO_COMENTARIO` VARCHAR(500) NOT NULL,
  `FECHA_COMENTARIO` DATE NOT NULL,
  PRIMARY KEY (`CODIGO_COMENTARIO`),
  INDEX `fk_TBL_COMENTARIOS_TBL_COMENTARIOS1_idx` (`CODIGO_COMENTARIO_SUPERIOR` ASC),
  INDEX `fk_TBL_COMENTARIOS_TBL_USUARIOS1_idx` (`CODIGO_USUARIO` ASC),
  CONSTRAINT `fk_TBL_COMENTARIOS_TBL_COMENTARIOS1`
    FOREIGN KEY (`CODIGO_COMENTARIO_SUPERIOR`)
    REFERENCES `db_harmony_code`.`TBL_COMENTARIOS` (`CODIGO_COMENTARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_COMENTARIOS_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_FACTURACION_PAGOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_FACTURACION_PAGOS` (
  `CODIGO_FACTURA` INT NOT NULL,
  `CODIGO_PLAN` INT NOT NULL,
  `CODIGO_USUARIO` INT NOT NULL,
  `CODIGO_LUGAR` INT NULL,
  `FECHA_INICIO` DATE NOT NULL,
  `FECHA_FIN` DATE NOT NULL,
  `MONTO` DOUBLE NOT NULL,
  PRIMARY KEY (`CODIGO_FACTURA`),
  INDEX `fk_TBL_FACTURACION_PAGOS_TBL_PLANES2_idx` (`CODIGO_PLAN` ASC),
  INDEX `fk_TBL_FACTURACION_PAGOS_TBL_USUARIOS1_idx` (`CODIGO_USUARIO` ASC),
  INDEX `fk_TBL_FACTURACION_PAGOS_TBL_LUGARES1_idx` (`CODIGO_LUGAR` ASC),
  CONSTRAINT `fk_TBL_FACTURACION_PAGOS_TBL_PLANES2`
    FOREIGN KEY (`CODIGO_PLAN`)
    REFERENCES `db_harmony_code`.`TBL_PLANES` (`CODIGO_PLAN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_FACTURACION_PAGOS_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_FACTURACION_PAGOS_TBL_LUGARES1`
    FOREIGN KEY (`CODIGO_LUGAR`)
    REFERENCES `db_harmony_code`.`TBL_LUGARES` (`CODIGO_LUGAR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_ACCIONES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_ACCIONES` (
  `CODIGO_ACCION` INT NOT NULL,
  `NOMBRE_ACCION` VARCHAR(45) NOT NULL COMMENT 'SON LAS ACCIONES DE LOS USUARIOS:\nMODIFICAR\nELIMINAR\nAGREGAR\nMOVER',
  PRIMARY KEY (`CODIGO_ACCION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_ESTADO_NOTIFICACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_ESTADO_NOTIFICACION` (
  `CODIGO_ESTADO_NOTIFICACION` INT NOT NULL,
  `NOMBRE_ESTADO_NOTIFICACION` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CODIGO_ESTADO_NOTIFICACION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_NOTIFICACIONES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_NOTIFICACIONES` (
  `CODIGO_NOTIFICACION` INT NOT NULL,
  `CODIGO_USUARIO` INT NOT NULL,
  `CODIGO_DOCUMENTO` INT NOT NULL,
  `ESTADO_NOTIFICACION` INT NULL,
  `CODIGO_COMENTARIO` INT NOT NULL,
  `CODIGO_ACCION` INT NULL,
  `FECHA_HORA_ACCESO` DATE NOT NULL,
  INDEX `fk_TBL_HISTORIAL_ACCESOS_TBL_USUARIOS1_idx` (`CODIGO_USUARIO` ASC),
  INDEX `fk_TBL_HISTORIAL_ACCESOS_TBL_DOCUMENTO1_idx` (`CODIGO_DOCUMENTO` ASC),
  PRIMARY KEY (`CODIGO_NOTIFICACION`),
  INDEX `fk_TBL_HISTORIAL_ACCESOS_TBL_ACCIONES1_idx` (`CODIGO_ACCION` ASC),
  INDEX `fk_TBL_NOTIFICACIONES_TBL_COMENTARIOS1_idx` (`CODIGO_COMENTARIO` ASC),
  INDEX `fk_TBL_NOTIFICACIONES_TBL_ESTADO_NOTIFICACION1_idx` (`ESTADO_NOTIFICACION` ASC),
  CONSTRAINT `fk_TBL_HISTORIAL_ACCESOS_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_HISTORIAL_ACCESOS_TBL_DOCUMENTO1`
    FOREIGN KEY (`CODIGO_DOCUMENTO`)
    REFERENCES `db_harmony_code`.`TBL_DOCUMENTO` (`CODIGO_DOCUMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_HISTORIAL_ACCESOS_TBL_ACCIONES1`
    FOREIGN KEY (`CODIGO_ACCION`)
    REFERENCES `db_harmony_code`.`TBL_ACCIONES` (`CODIGO_ACCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_NOTIFICACIONES_TBL_COMENTARIOS1`
    FOREIGN KEY (`CODIGO_COMENTARIO`)
    REFERENCES `db_harmony_code`.`TBL_COMENTARIOS` (`CODIGO_COMENTARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_NOTIFICACIONES_TBL_ESTADO_NOTIFICACION1`
    FOREIGN KEY (`ESTADO_NOTIFICACION`)
    REFERENCES `db_harmony_code`.`TBL_ESTADO_NOTIFICACION` (`CODIGO_ESTADO_NOTIFICACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_COMPARTIR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_COMPARTIR` (
  `CODIGO_USUARIO_COMPARTIENDO` INT NOT NULL,
  `CODIGO_DOCUMENTO_COMPARTIR` INT NOT NULL,
  `CODIGO_USUARIO_COMPARTIDO` INT NOT NULL,
  `FECHA_COMPARTIDO` DATE NULL,
  `ENLACE_COMPARTIR` VARCHAR(100) NULL,
  PRIMARY KEY (`CODIGO_USUARIO_COMPARTIENDO`, `CODIGO_DOCUMENTO_COMPARTIR`),
  INDEX `fk_TBL_COMPARTIR_TBL_USUARIOS1_idx` (`CODIGO_USUARIO_COMPARTIENDO` ASC),
  INDEX `fk_TBL_COMPARTIR_TBL_DOCUMENTO1_idx` (`CODIGO_DOCUMENTO_COMPARTIR` ASC),
  INDEX `fk_TBL_COMPARTIR_TBL_USUARIOS2_idx` (`CODIGO_USUARIO_COMPARTIDO` ASC),
  CONSTRAINT `fk_TBL_COMPARTIR_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO_COMPARTIENDO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_COMPARTIR_TBL_DOCUMENTO1`
    FOREIGN KEY (`CODIGO_DOCUMENTO_COMPARTIR`)
    REFERENCES `db_harmony_code`.`TBL_DOCUMENTO` (`CODIGO_DOCUMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_COMPARTIR_TBL_USUARIOS2`
    FOREIGN KEY (`CODIGO_USUARIO_COMPARTIDO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_harmony_code`.`TBL_SUSCRIPCIONES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_harmony_code`.`TBL_SUSCRIPCIONES` (
  `CODIGO_USUARIO` INT NOT NULL,
  `CODIGO_PLAN` INT NOT NULL,
  `FECHA_SUSCRIPCION` DATE NULL,
  INDEX `fk_TBL_SUSCRIPCIONES_TBL_USUARIOS1_idx` (`CODIGO_USUARIO` ASC),
  INDEX `fk_TBL_SUSCRIPCIONES_TBL_PLANES1_idx` (`CODIGO_PLAN` ASC),
  PRIMARY KEY (`CODIGO_USUARIO`, `CODIGO_PLAN`),
  CONSTRAINT `fk_TBL_SUSCRIPCIONES_TBL_USUARIOS1`
    FOREIGN KEY (`CODIGO_USUARIO`)
    REFERENCES `db_harmony_code`.`TBL_USUARIOS` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_SUSCRIPCIONES_TBL_PLANES1`
    FOREIGN KEY (`CODIGO_PLAN`)
    REFERENCES `db_harmony_code`.`TBL_PLANES` (`CODIGO_PLAN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
